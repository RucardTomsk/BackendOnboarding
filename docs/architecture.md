# Архитектурный стиль

## Структура

Сервис делится на несколько абстракций (слоев):
- **api** - интерфейс для внешнего взаимодействия
  - **controller** - HTTP-контроллер для запросов
  - **model** - модели, используемые контроллером
  - **router** - декларация роутинга
- **config** - конфигурация приложения
- **docs** - автогенерируемая документация Swagger
- **service** - слой сервисов (бизнес-логика)
- **storage** - слой данных
  - **dao** - объекты для взаимодействия с БД
  - **migration** - правила миграции данных

## Инициализация объектов

Все объекты обязательно инициализируются в функции `main.go` 
для имплементации инверсии зависимостей.

Общая схема взаимодействия примерно следующая:
- **api/controller** использует **service**
- **service** использует **storage/dao**

### Работа с конфигом

Одним из первых своих параметров объект получает **конфиг**.

### Использование контекстов

Каждый публичный метод должен в обязательном порядке принимать **контекст**:
- В первую очередь, в контексте **передается логер**, преинициализированный 
некоторыми параметрами запроса (например, trackingID)
- Во-вторых, через контекст может быть опционально реализована 
**логика таймаутов и отмены** запросов

## Телеметрия

### Логи

Каждый сервис обязан отдавать логи в формате JSON.

